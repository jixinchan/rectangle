function rectangle(e,t){var a=Number(e),r=Number(t);this.area=function(){return a*r},this.perimeter=function(){return 2*(a+r)}}function valid(e){var t={isOK:!1,reason:""};return""==e?t.reason="不能为空！":/^-?(0|[1-9]\d*)(\.\d*)?([eE][+-])?(\d+)?$/.test(e)?Number(e)<0?t.reason="不能为负！":(t.reason="",t.isOK=!0):t.reason="不是数字！",t}$(function(){var a=$("#width"),r=$("#length"),e=$("#caculate"),n=$("#area"),l=$("#perimeter"),i=$("#width-validation"),u=$("#length-validation");e.click(function(){var e=a.val();if(""===r.val()&&u.html("高度不能为空！"),""!==e){var t=new rectangle(a.val(),r.val());n.val(t.area()),l.val(t.perimeter())}else i.html("宽度不能为空！")}),r.focusout(function(){var e=valid(r.val());e.isOK?u.html(""):(u.html("长度"+e.reason),r.select())}),a.focusout(function(){var e=valid(a.val());e.isOK?i.html(""):(i.html("宽度"+e.reason),a.select())}),a.keypress(function(e){/[abcdf-zABCDF-Z`~!@#$%^&*()=_+[\]{}|;:'",<>/?\\]/.test(e.key)&&e.preventDefault(),"."===e.key&&(""===e.target.value&&e.preventDefault(),-1!==e.target.value.indexOf(".")?e.preventDefault():0===e.target.selecttionStart&&e.preventDefault())}),r.keypress(function(e){/[abcdf-zABCDF-Z`~!@#$%^&*()=_+[\]{}|;:'",<>/?\\]/.test(e.key)&&e.preventDefault(),"."===e.key&&(""===e.target.value&&e.preventDefault(),-1!==e.target.value.indexOf(".")?e.preventDefault():0===e.target.selecttionStart&&e.preventDefault())})});